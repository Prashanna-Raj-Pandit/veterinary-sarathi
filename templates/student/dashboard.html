{% extends "base.html" %}

{% block title %}My Dashboard - Swasthik Loksewa{% endblock %}

{% block content %}
<section class="dashboard-section">
    <div class="container">
        <h1>Welcome, {{ current_user.username }}!</h1>
        <p class="dashboard-subtitle">Your Learning Dashboard</p>
        
        {% if enrollments %}
            <div class="enrolled-courses">
                <h2>My Enrolled Courses</h2>
                <div class="courses-grid">
                    {% for enrollment in enrollments %}
                    <div class="course-card enrolled">
                        {% if enrollment.thumbnail %}
                            <img src="{{ url_for('static', filename='../uploads/' ~ enrollment.thumbnail) }}" alt="{{ enrollment.title }}" class="course-thumbnail">
                        {% else %}
                            <div class="course-thumbnail-placeholder">ğŸ¾</div>
                        {% endif %}
                        <div class="course-info">
                            <span class="course-category">{{ enrollment.category|title }}</span>
                            <h3>{{ enrollment.title }}</h3>
                            <p>{{ enrollment.description[:80] }}...</p>
                            
                            <!-- Progress Bar -->
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: {{ enrollment.progress }}%"></div>
                                </div>
                                <span class="progress-text">{{ enrollment.progress|int }}% Complete</span>
                            </div>
                            
                            <div class="course-footer">
                                <span class="enrolled-date">Enrolled: {{ enrollment.enrolled_at[:10] }}</span>
                                <a href="{{ url_for('student.watch_course', course_id=enrollment.course_id) }}" class="btn btn-small">Continue Learning</a>
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        {% else %}
            <div class="empty-state">
                <div class="empty-icon">ğŸ“š</div>
                <h3>You haven't enrolled in any courses yet</h3>
                <p>Start your learning journey by accessing our comprehensive course</p>
                <a href="{{ url_for('courses.index') }}" class="btn btn-primary">View Course</a>
            </div>
        {% endif %}
        
        <!-- Quick Actions -->
        <div class="quick-actions">
            <h3>Quick Actions</h3>
            <div class="actions-grid">
                <a href="{{ url_for('courses.index') }}" class="action-card">
                    <div class="action-icon">ğŸ”</div>
                    <h4>View Course</h4>
                </a>
                <a href="{{ url_for('student.cart') }}" class="action-card">
                    <div class="action-icon">ğŸ›’</div>
                    <h4>My Cart</h4>
                </a>
                <a href="{{ url_for('payment.payment_history') }}" class="action-card">
                    <div class="action-icon">ğŸ’³</div>
                    <h4>Payment History</h4>
                </a>
                <a href="{{ url_for('auth.profile') }}" class="action-card">
                    <div class="action-icon">ğŸ‘¤</div>
                    <h4>My Profile</h4>
                </a>
            </div>
        </div>
    </div>
</section>
{% endblock %}
