{% extends "base.html" %}

{% block title %}Manage Courses - Admin{% endblock %}

{% block content %}
<section class="admin-courses">
    <div class="container">
        <div class="page-header">
            <h1>Course Management</h1>
            <a href="{{ url_for('admin.create_course') }}" class="btn btn-primary">+ Create New Course</a>
        </div>
        
        {% if courses %}
        <div class="courses-list">
            {% for course in courses %}
            <div class="course-admin-card">
                <div class="course-admin-thumbnail">
                    {% if course.thumbnail %}
                        <img src="{{ url_for('static', filename='../uploads/' ~ course.thumbnail) }}" alt="{{ course.title }}">
                    {% else %}
                        <div class="thumbnail-placeholder">ğŸ¾</div>
                    {% endif %}
                </div>
                <div class="course-admin-info">
                    <h3>{{ course.title }}</h3>
                    <p class="course-category">{{ course.category|title }}</p>
                    <p class="course-description">{{ course.description[:150] }}...</p>
                    <p class="course-price"><strong>{{ course.price|currency }}</strong></p>
                </div>
                <div class="course-admin-actions">
                    <a href="{{ url_for('admin.course_contents', course_id=course.id) }}" class="btn btn-small btn-info">View Content</a>
                    <a href="{{ url_for('admin.edit_course', course_id=course.id) }}" class="btn btn-small btn-warning">Edit</a>
                    <form method="POST" action="{{ url_for('admin.delete_course', course_id=course.id) }}" style="display: inline;" onsubmit="return confirm('Are you sure you want to delete this course? This will also delete all associated content.');">
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                        <button type="submit" class="btn btn-small btn-danger">Delete</button>
                    </form>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state">
            <div class="empty-icon">
                <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                    <path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
                </svg>
            </div>
            <h3>No courses created yet</h3>
            <p>Create your first course to get started</p>
            <a href="{{ url_for('admin.create_course') }}" class="btn btn-primary">Create Course</a>
        </div>
        {% endif %}
    </div>
</section>
{% endblock %}
